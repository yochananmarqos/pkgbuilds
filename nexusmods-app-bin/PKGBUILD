# https://aur.archlinux.org/packages/nexusmods-app-bin
groups=('modified')

pkgname=nexusmods-app-bin
pkgver=0.5.1
pkgrel=1
pkgdesc="A mod installer, creator and manager for all your popular games."
arch=('x86_64')
url="https://github.com/Nexus-Mods/NexusMods.App"
license=('GPL-3.0-or-later')
depends=('fontconfig' 'hicolor-icon-theme' 'java-runtime' 'snappy' 'xdg-utils')
provides=("${pkgname%-bin}")
conflicts=("${pkgname%-bin}")
options=('!strip')
source=("https://github.com/Nexus-Mods/NexusMods.App/releases/download/v${pkgver}/NexusMods.App-${pkgver}-1.linux-x64.zip"
        "${pkgname%-bin}.desktop"
        "https://github.com/Nexus-Mods/NexusMods.App/raw/v${pkgver}/src/NexusMods.App.UI/Assets/nexus-logo.svg")
noextract=("NexusMods.App-${pkgver}-1.linux-x64.zip")
sha256sums=('1e50a44c7cb6e4c1d966417eeacc750a636b0687ba3e3d6fee7cbdde3cdddf0c'
            'ee7df723e1a42da3d368c12c8c6a2019a7312b8031ca6f0f6b9b36f763995ecc'
            '5a22eccfb001eacbf2756f2e21fa371dbafd9e84b20bb6a484d781bde33089cb')

package() {
  install -d "${pkgdir}/opt/NexusMods.App"
  bsdtar -xvf "NexusMods.App-${pkgver}-1.linux-x64.zip" -C "${pkgdir}/opt/NexusMods.App/"

  install -d "$pkgdir/usr/bin"
  ln -s "/opt/NexusMods.App/NexusMods.App" "$pkgdir/usr/bin/"

  install -Dm644 "${pkgname%-bin}.desktop" -t "${pkgdir}/usr/share/applications/"
  install -Dm644 "nexus-logo.svg" "${pkgdir}/usr/share/icons/hicolor/scalable/apps/nexusmods-app.svg"
}
