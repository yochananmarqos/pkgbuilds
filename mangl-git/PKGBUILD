# https://aur.archlinux.org/packages/mangl-git
groups=('modified')

pkgname=mangl-git
pkgver=1.1.5.r0.g09097d3
pkgrel=1
pkgdesc="Graphical man page viewer"
arch=('x86_64')
url="https://github.com/zigalenarcic/mangl"
license=('BSD-2-Clause')
depends=('freetype2' 'glfw' 'libglvnd')
makedepends=('git')
optdepends=('fontconfig: set custom font')
provides=("${pkgname%-git}")
conflicts=("${pkgname%-git}")
source=('git+https://github.com/zigalenarcic/mangl.git'
        "${pkgname%-git}.desktop"
        'manglrc_example')
sha256sums=('SKIP'
            '370e454df24a2bf0bf185988d92083c0ec5bd72548a5fba9c44867e76a1d8d91'
            '527eb963486647d759f3884beff0acb24424a93b02d285008d475bcb26534e80')

pkgver() {
  cd "${pkgname%-git}"
  git describe --long --tags | sed 's/^v//;s/\([^-]*-g\)/r\1/;s/-/./g'
}

build() {
  cd "${pkgname%-git}"
  ./configure
  make
}

package() {
  cd "${pkgname%-git}"
  make BINDIR=/usr/bin MANDIR=/usr/share/man DESTDIR="$pkgdir" install

  install -Dm644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname"
}
